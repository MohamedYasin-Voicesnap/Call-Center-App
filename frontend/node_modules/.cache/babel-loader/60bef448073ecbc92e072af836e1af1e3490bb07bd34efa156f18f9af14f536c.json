{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { fetchAgentDetails as apiFetchAgentDetails, handleAddAgent as apiHandleAddAgent, handleEditAgent as apiHandleEditAgent, handleDeleteAgent as apiHandleDeleteAgent, postAgentBreakStatus, fetchAllAgentBreaks } from '../utils/api';\nimport { closeLatestAgentBreak as apiCloseLatestAgentBreak } from '../utils/api';\nexport default function useAgents() {\n  _s();\n  const [agentDetails, setAgentDetails] = useState([]);\n  const [deleteLoading, setDeleteLoading] = useState(false);\n  const fetchAgentDetails = async authToken => {\n    const agents = await apiFetchAgentDetails(authToken);\n    setAgentDetails(agents);\n  };\n  const handleAddAgent = async (formData, token, onSuccess, onError, setLoading) => {\n    setLoading(true);\n    const result = await apiHandleAddAgent(formData, token);\n    if (result.success) {\n      if (onSuccess) onSuccess();\n      fetchAgentDetails(token);\n    } else {\n      if (onError) onError(result.message);\n    }\n    setLoading(false);\n  };\n  const handleEditAgent = async (formData, token, onSuccess, onError, setLoading) => {\n    setLoading(true);\n    const result = await apiHandleEditAgent(formData, token);\n    if (result.success) {\n      if (onSuccess) onSuccess();\n      fetchAgentDetails(token);\n    } else {\n      if (onError) onError(result.message);\n    }\n    setLoading(false);\n  };\n  const handleDeleteAgent = async (agentNumber, token, onSuccess, onError) => {\n    setDeleteLoading(true);\n    const result = await apiHandleDeleteAgent(agentNumber, token);\n    if (result.success) {\n      setAgentDetails(prev => prev.filter(agent => agent.agent_number !== agentNumber));\n      if (onSuccess) onSuccess();\n    } else {\n      if (onError) onError(result.message);\n    }\n    setDeleteLoading(false);\n  };\n\n  // Save agent break/working status\n  const saveAgentBreakStatus = async (breakData, token) => {\n    return await postAgentBreakStatus(breakData, token);\n  };\n\n  // Close latest ongoing break\n  const closeLatestAgentBreak = async (agentNumber, breakEnd, token) => {\n    return await apiCloseLatestAgentBreak(agentNumber, breakEnd, token);\n  };\n\n  // Fetch all agent break/working status records (admin)\n  const getAllAgentBreaks = async (token, search = '') => {\n    return await fetchAllAgentBreaks(token, search);\n  };\n  return {\n    agentDetails,\n    setAgentDetails,\n    fetchAgentDetails,\n    handleAddAgent,\n    handleEditAgent,\n    handleDeleteAgent,\n    deleteLoading,\n    setDeleteLoading,\n    saveAgentBreakStatus,\n    closeLatestAgentBreak,\n    getAllAgentBreaks\n  };\n}\n_s(useAgents, \"v2/1UV/GXfcvB0mn3C88sAyFksw=\");","map":{"version":3,"names":["useState","fetchAgentDetails","apiFetchAgentDetails","handleAddAgent","apiHandleAddAgent","handleEditAgent","apiHandleEditAgent","handleDeleteAgent","apiHandleDeleteAgent","postAgentBreakStatus","fetchAllAgentBreaks","closeLatestAgentBreak","apiCloseLatestAgentBreak","useAgents","_s","agentDetails","setAgentDetails","deleteLoading","setDeleteLoading","authToken","agents","formData","token","onSuccess","onError","setLoading","result","success","message","agentNumber","prev","filter","agent","agent_number","saveAgentBreakStatus","breakData","breakEnd","getAllAgentBreaks","search"],"sources":["D:/Projects/Asterisk Frontend M/Asterisk Frontend M/frontend/src/hooks/useAgents.js"],"sourcesContent":["import { useState } from 'react';\nimport {\n  fetchAgentDetails as apiFetchAgentDetails,\n  handleAddAgent as apiHandleAddAgent,\n  handleEditAgent as apiHandleEditAgent,\n  handleDeleteAgent as apiHandleDeleteAgent,\n  postAgentBreakStatus,\n  fetchAllAgentBreaks\n} from '../utils/api';\nimport { closeLatestAgentBreak as apiCloseLatestAgentBreak } from '../utils/api';\n\nexport default function useAgents() {\n  const [agentDetails, setAgentDetails] = useState([]);\n  const [deleteLoading, setDeleteLoading] = useState(false);\n\n  const fetchAgentDetails = async (authToken) => {\n    const agents = await apiFetchAgentDetails(authToken);\n    setAgentDetails(agents);\n  };\n\n  const handleAddAgent = async (formData, token, onSuccess, onError, setLoading) => {\n    setLoading(true);\n    const result = await apiHandleAddAgent(formData, token);\n    if (result.success) {\n      if (onSuccess) onSuccess();\n      fetchAgentDetails(token);\n    } else {\n      if (onError) onError(result.message);\n    }\n    setLoading(false);\n  };\n\n  const handleEditAgent = async (formData, token, onSuccess, onError, setLoading) => {\n    setLoading(true);\n    const result = await apiHandleEditAgent(formData, token);\n    if (result.success) {\n      if (onSuccess) onSuccess();\n      fetchAgentDetails(token);\n    } else {\n      if (onError) onError(result.message);\n    }\n    setLoading(false);\n  };\n\n  const handleDeleteAgent = async (agentNumber, token, onSuccess, onError) => {\n    setDeleteLoading(true);\n    const result = await apiHandleDeleteAgent(agentNumber, token);\n    if (result.success) {\n      setAgentDetails(prev => prev.filter(agent => agent.agent_number !== agentNumber));\n      if (onSuccess) onSuccess();\n    } else {\n      if (onError) onError(result.message);\n    }\n    setDeleteLoading(false);\n  };\n\n  // Save agent break/working status\n  const saveAgentBreakStatus = async (breakData, token) => {\n    return await postAgentBreakStatus(breakData, token);\n  };\n\n  // Close latest ongoing break\n  const closeLatestAgentBreak = async (agentNumber, breakEnd, token) => {\n    return await apiCloseLatestAgentBreak(agentNumber, breakEnd, token);\n  };\n\n  // Fetch all agent break/working status records (admin)\n  const getAllAgentBreaks = async (token, search = '') => {\n    return await fetchAllAgentBreaks(token, search);\n  };\n\n  return {\n    agentDetails,\n    setAgentDetails,\n    fetchAgentDetails,\n    handleAddAgent,\n    handleEditAgent,\n    handleDeleteAgent,\n    deleteLoading,\n    setDeleteLoading,\n    saveAgentBreakStatus,\n    closeLatestAgentBreak,\n    getAllAgentBreaks\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
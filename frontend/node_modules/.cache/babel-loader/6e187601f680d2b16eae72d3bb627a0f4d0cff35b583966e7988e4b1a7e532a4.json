{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { fetchAgentDetails as apiFetchAgentDetails, handleAddAgent as apiHandleAddAgent, handleEditAgent as apiHandleEditAgent, handleDeleteAgent as apiHandleDeleteAgent, postAgentBreakStatus, fetchAllAgentBreaks } from '../utils/api';\nimport { closeLatestAgentBreak as apiCloseLatestAgentBreak } from '../utils/api';\nimport { fetchAgentsCurrentStatus as apiFetchAgentsCurrentStatus } from '../utils/api';\nexport default function useAgents() {\n  _s();\n  const [agentDetails, setAgentDetails] = useState([]);\n  const [deleteLoading, setDeleteLoading] = useState(false);\n  const [currentStatusMap, setCurrentStatusMap] = useState({});\n  const fetchAgentDetails = async authToken => {\n    const agents = await apiFetchAgentDetails(authToken);\n    setAgentDetails(agents);\n  };\n  const refreshAgentsCurrentStatus = async authToken => {\n    const map = await apiFetchAgentsCurrentStatus(authToken);\n    setCurrentStatusMap(map);\n  };\n  const handleAddAgent = async (formData, token, onSuccess, onError, setLoading) => {\n    setLoading(true);\n    const result = await apiHandleAddAgent(formData, token);\n    if (result.success) {\n      if (onSuccess) onSuccess();\n      fetchAgentDetails(token);\n    } else {\n      if (onError) onError(result.message);\n    }\n    setLoading(false);\n  };\n  const handleEditAgent = async (formData, token, onSuccess, onError, setLoading) => {\n    setLoading(true);\n    const result = await apiHandleEditAgent(formData, token);\n    if (result.success) {\n      if (onSuccess) onSuccess();\n      fetchAgentDetails(token);\n    } else {\n      if (onError) onError(result.message);\n    }\n    setLoading(false);\n  };\n  const handleDeleteAgent = async (agentNumber, token, onSuccess, onError) => {\n    setDeleteLoading(true);\n    const result = await apiHandleDeleteAgent(agentNumber, token);\n    if (result.success) {\n      setAgentDetails(prev => prev.filter(agent => agent.agent_number !== agentNumber));\n      if (onSuccess) onSuccess();\n    } else {\n      if (onError) onError(result.message);\n    }\n    setDeleteLoading(false);\n  };\n\n  // Save agent break/working status\n  const saveAgentBreakStatus = async (breakData, token) => {\n    return await postAgentBreakStatus(breakData, token);\n  };\n\n  // Close latest ongoing break\n  const closeLatestAgentBreak = async (agentNumber, breakEnd, token) => {\n    return await apiCloseLatestAgentBreak(agentNumber, breakEnd, token);\n  };\n\n  // Fetch all agent break/working status records (admin)\n  const getAllAgentBreaks = async (token, search = '') => {\n    return await fetchAllAgentBreaks(token, search);\n  };\n  return {\n    agentDetails,\n    setAgentDetails,\n    currentStatusMap,\n    refreshAgentsCurrentStatus,\n    fetchAgentDetails,\n    handleAddAgent,\n    handleEditAgent,\n    handleDeleteAgent,\n    deleteLoading,\n    setDeleteLoading,\n    saveAgentBreakStatus,\n    closeLatestAgentBreak,\n    getAllAgentBreaks\n  };\n}\n_s(useAgents, \"85NrV3lfQ7VFwMGkdZhhSMDpoek=\");","map":{"version":3,"names":["useState","fetchAgentDetails","apiFetchAgentDetails","handleAddAgent","apiHandleAddAgent","handleEditAgent","apiHandleEditAgent","handleDeleteAgent","apiHandleDeleteAgent","postAgentBreakStatus","fetchAllAgentBreaks","closeLatestAgentBreak","apiCloseLatestAgentBreak","fetchAgentsCurrentStatus","apiFetchAgentsCurrentStatus","useAgents","_s","agentDetails","setAgentDetails","deleteLoading","setDeleteLoading","currentStatusMap","setCurrentStatusMap","authToken","agents","refreshAgentsCurrentStatus","map","formData","token","onSuccess","onError","setLoading","result","success","message","agentNumber","prev","filter","agent","agent_number","saveAgentBreakStatus","breakData","breakEnd","getAllAgentBreaks","search"],"sources":["D:/Projects/Git Clone File/Call-Center-App/frontend/src/hooks/useAgents.js"],"sourcesContent":["import { useState } from 'react';\r\nimport {\r\n  fetchAgentDetails as apiFetchAgentDetails,\r\n  handleAddAgent as apiHandleAddAgent,\r\n  handleEditAgent as apiHandleEditAgent,\r\n  handleDeleteAgent as apiHandleDeleteAgent,\r\n  postAgentBreakStatus,\r\n  fetchAllAgentBreaks\r\n} from '../utils/api';\r\nimport { closeLatestAgentBreak as apiCloseLatestAgentBreak } from '../utils/api';\r\nimport { fetchAgentsCurrentStatus as apiFetchAgentsCurrentStatus } from '../utils/api';\r\n\r\nexport default function useAgents() {\r\n  const [agentDetails, setAgentDetails] = useState([]);\r\n  const [deleteLoading, setDeleteLoading] = useState(false);\r\n  const [currentStatusMap, setCurrentStatusMap] = useState({});\r\n\r\n  const fetchAgentDetails = async (authToken) => {\r\n    const agents = await apiFetchAgentDetails(authToken);\r\n    setAgentDetails(agents);\r\n  };\r\n\r\n  const refreshAgentsCurrentStatus = async (authToken) => {\r\n    const map = await apiFetchAgentsCurrentStatus(authToken);\r\n    setCurrentStatusMap(map);\r\n  };\r\n\r\n  const handleAddAgent = async (formData, token, onSuccess, onError, setLoading) => {\r\n    setLoading(true);\r\n    const result = await apiHandleAddAgent(formData, token);\r\n    if (result.success) {\r\n      if (onSuccess) onSuccess();\r\n      fetchAgentDetails(token);\r\n    } else {\r\n      if (onError) onError(result.message);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleEditAgent = async (formData, token, onSuccess, onError, setLoading) => {\r\n    setLoading(true);\r\n    const result = await apiHandleEditAgent(formData, token);\r\n    if (result.success) {\r\n      if (onSuccess) onSuccess();\r\n      fetchAgentDetails(token);\r\n    } else {\r\n      if (onError) onError(result.message);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleDeleteAgent = async (agentNumber, token, onSuccess, onError) => {\r\n    setDeleteLoading(true);\r\n    const result = await apiHandleDeleteAgent(agentNumber, token);\r\n    if (result.success) {\r\n      setAgentDetails(prev => prev.filter(agent => agent.agent_number !== agentNumber));\r\n      if (onSuccess) onSuccess();\r\n    } else {\r\n      if (onError) onError(result.message);\r\n    }\r\n    setDeleteLoading(false);\r\n  };\r\n\r\n  // Save agent break/working status\r\n  const saveAgentBreakStatus = async (breakData, token) => {\r\n    return await postAgentBreakStatus(breakData, token);\r\n  };\r\n\r\n  // Close latest ongoing break\r\n  const closeLatestAgentBreak = async (agentNumber, breakEnd, token) => {\r\n    return await apiCloseLatestAgentBreak(agentNumber, breakEnd, token);\r\n  };\r\n\r\n  // Fetch all agent break/working status records (admin)\r\n  const getAllAgentBreaks = async (token, search = '') => {\r\n    return await fetchAllAgentBreaks(token, search);\r\n  };\r\n\r\n  return {\r\n    agentDetails,\r\n    setAgentDetails,\r\n    currentStatusMap,\r\n    refreshAgentsCurrentStatus,\r\n    fetchAgentDetails,\r\n    handleAddAgent,\r\n    handleEditAgent,\r\n    handleDeleteAgent,\r\n    deleteLoading,\r\n    setDeleteLoading,\r\n    saveAgentBreakStatus,\r\n    closeLatestAgentBreak,\r\n    getAllAgentBreaks\r\n  };\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}